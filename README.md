# CosmoObjects

Веб-приложение для визуализации космических объектов (планет) Солнечной системы.

Учебный проект, созданный для демонстрации на трёх лекциях по курсу Web-технологии. Приложение демонстрирует основные концепции современной веб-разработки с использованием React и TypeScript.

## Функциональность

- Визуализация планет в виде кругов, пропорциональных их диаметру
- Список космических объектов с информацией о диаметре и типе
- Загрузка данных через REST API (Express сервер)
- Добавление новых космических объектов
- Редактирование существующих объектов
- Удаление объектов
- Настраиваемая визуализация (горизонтальная/вертикальная ориентация, ограничение количества объектов)

## Технологии

- **React 19** - библиотека для создания пользовательского интерфейса
- **TypeScript** - типизированный JavaScript
- **Vite** - инструмент сборки и разработки
- **Ant Design** - UI библиотека компонентов
- **React Query (TanStack Query)** - управление состоянием серверных данных
- **Axios** - HTTP клиент
- **Express** - серверная платформа для Node.js
- **express-validator** - валидация данных на сервере
- **Docker** - контейнеризация приложения
- **Nginx** - веб-сервер и reverse proxy

## Установка и запуск

### Локальная разработка

1. Установите зависимости:
```bash
npm install
```

2. Запустите Express сервер для API:
```bash
node server.ts
```

3. В другом терминале запустите приложение:
```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173`

### Запуск с Docker

1. Убедитесь, что Docker и Docker Compose установлены

2. Запустите приложение:
```bash
docker-compose up --build
```

Приложение будет доступно по адресу `http://localhost:8080`

## Структура проекта

- `src/App.tsx` - главный компонент приложения
- `src/Visualizer.tsx` - компонент визуализации планет
- `src/CosmoObjectForm.tsx` - форма для создания и редактирования космических объектов
- `src/DeleteButton.tsx` - компонент кнопки удаления объекта
- `src/api.ts` - настройка React Query для загрузки данных и мутации (создание, обновление, удаление)
- `src/types.ts` - TypeScript типы
- `server.ts` - Express сервер с REST API
- `db.json` - база данных в формате JSON
- `Dockerfile.client` - Docker образ для клиентской части
- `Dockerfile.server` - Docker образ для серверной части
- `docker-compose.yml` - конфигурация для оркестрации контейнеров
- `nginx.conf` - конфигурация Nginx для проксирования запросов

## Что было сделано на занятиях

### Занятие 1
- Настройка проекта (React, TypeScript, Vite)
- Создание базовой структуры приложения
- Интеграция Ant Design
- Настройка React Query для загрузки данных
- Создание компонента визуализации планет
- Настройка json-server для mock API

### Занятие 2
- Добавление формы для создания и редактирования космических объектов (`CosmoObjectForm.tsx`)
- Реализация мутаций в React Query для сохранения и удаления объектов
- Добавление функциональности редактирования объектов в списке
- Добавление кнопки удаления объектов (`DeleteButton.tsx`)
- Улучшение компонента визуализации: добавление параметров `orientation` и `maxCount` для настройки отображения
- Интеграция ColorPicker для выбора цвета объектов
- Реализация инвалидации кэша React Query после мутаций для автоматического обновления данных

### Занятие 3
- Замена json-server на собственный Express сервер (`server.ts`)
- Реализация REST API endpoints (GET, POST, PUT, DELETE) для работы с космическими объектами
- Добавление валидации данных на сервере с использованием express-validator
- Настройка CORS для кросс-доменных запросов
- Генерация уникальных ID для новых объектов с помощью nanoid
- Docker контейнеризация приложения:
  - Создание `Dockerfile.client` с multi-stage build (сборка React приложения и раздача через Nginx)
  - Создание `Dockerfile.server` для Express сервера
  - Настройка `docker-compose.yml` для оркестрации контейнеров
- Настройка Nginx как reverse proxy для проксирования API запросов к серверу
- Настройка сети Docker для взаимодействия между контейнерами
